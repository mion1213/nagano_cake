<div class="container p-3">
  <div class="row">
    <div class="col-md-12">

      <h3>注文情報入力</h3>
      <%= form_with model: Order.new, url: confirm_orders_path, method: :get do |f|  %>

      <h4>支払い方法</h4>
        <%= f.radio_button :payment_method, Order.payment_methods.key(0) %>
        <%= f.label :payment_method, Order.payment_methods_i18n[:credit_card] %>
        <br>
        <%= f.radio_button :payment_method, Order.payment_methods.key(1) %>
        <%= f.label :payment_method, Order.payment_methods_i18n[:transfer] %>

      <div>
        <h4>お届け先</h4>
        <%= f.radio_button :address, Address.address_types.key(0) %>
        <%= f.label :address, Address.address_types_i18n[:current_customer_address] %>
        <% if current_customer.addresses.present? %>
          <% current_customer.addresses.each do |address| %>
            <%= address.address_display %><br>
          <% end %>
        <% end %>
      
        <%= f.radio_button :address, Address.address_types.key(1) %>
        <%= f.label :address, Address.address_types_i18n[:addresses] %>
        <%= f.select :address_id, options_from_collection_for_select(Address.all, :id, :address_display) %>
      
        <%= f.radio_button :address, Address.address_types.key(2) %>
        <%= f.label :address, Address.address_types_i18n[:new_address] %>
      
        <%= f.fields_for @address do |address_form| %>
          <h4>郵便番号(ハイフンなし)</h4>
          <%= address_form.text_field :postal_code %>
          <h4>住所</h4>
          <%= address_form.text_field :address %>
          <h4>宛名</h4>
          <%= address_form.text_field :name %>
        <% end %>
      </div>
        <%= f.submit "確認画面へ進む", class: "btn btn-info" %>
      <% end %>
    </div>
  </div>
</div>
